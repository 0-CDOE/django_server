{% extends 'base.html' %}

{% block content %}

{% comment %} 이미지 등록 팝업창 {% endcomment %}
<div id="uploadModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header">
                <h5 class="modal-title" id="uploadModalLabel">이미지 업로드</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        {% comment %} 첫 번째 이미지 드래그 앤 드롭 {% endcomment %}
                        <div id="drop-zone1" class="border border-primary rounded d-flex justify-content-center align-items-center p-3 drop-zone" style="height: 150px;">
                            <div class="drop-text">image 1 drop or click.</div>
                            <input type="file" id="image1" class="file-input" accept="image/*" hidden>
                            <img id="preview-image1" class="img-fluid" style="display: none;" />
                        </div>
                    </div>

                    <div class="col-md-6">
                        {% comment %} 두 번째 이미지 드래그 앤 드롭 {% endcomment %}
                        <div id="drop-zone2" class="border border-primary rounded d-flex justify-content-center align-items-center p-3 drop-zone" style="height: 150px;">
                            <div class="drop-text">image 2 drop or click.</div>
                            <input type="file" id="image2" class="file-input" accept="image/*" hidden>
                            <img id="preview-image2" class="img-fluid" style="display: none;" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-primary confirm-btn" data-dismiss="modal">확인</button>
            </div>
        </div>
    </div>
</div>

{% comment %} 질문 등록/수정 폼 {% endcomment %}
<div class="container">
    <form id="questionForm" method="post" class="post-form my-3" enctype="multipart/form-data">
        {% csrf_token %}

        {% if form.errors %}
            <div class="alert alert-danger" role="alert">
                {{ form.non_field_errors }}
                {% for field in form %}
                    {% if field.errors %}
                        <strong>{{ field.label }}</strong>
                        {{ field.errors }}
                    {% endif %}
                {% endfor %}
            </div>
        {% endif %}

        {{ form.as_p }}  <!-- 장고의 form.as_p를 사용하여 폼 필드 출력 -->

        {% comment %} 이미지 업로드 버튼 {% endcomment %}
        <button type="button" id="uploadBtn" class="btn btn-secondary mt-3" data-toggle="modal" data-target="#uploadModal">
            {% if form.instance.pk %}
            이미지 새로 등록 및 확인
            {% else %}
            이미지 등록 및 보기
            {% endif %}
        </button>

        {% comment %} 모델 선택 {% endcomment %}
        <h5 class="my-3 border-bottom pb-2">모델 선택</h5>
        <div class="form-group mb-3">
            <label for="detectors">탐지기 (Detectors)</label><br>
            <input type="checkbox" name="detectors" value="dlib" id="dlib_detector">
            <label for="dlib_detector">Dlib</label><br>
            <input type="checkbox" name="detectors" value="yolo" id="yolo_detector">
            <label for="yolo_detector">YOLO</label><br>
            <input type="checkbox" name="detectors" value="mtcnn" id="mtcnn_detector">
            <label for="mtcnn_detector">MTCNN</label>
        </div>

        <div class="form-group mb-3">
            <label for="predictors">예측기 (Predictors)</label><br>
            <input type="checkbox" name="predictors" value="fairface" id="fairface_predictor">
            <label for="fairface_predictor">FairFace</label>
        </div>

        <button type="submit" class="btn btn-primary mt-3">
            {% if form.instance.pk %}
                수정하기
            {% else %}
                등록하기
            {% endif %}
        </button>
    </form>
</div>

{% endblock %}

{% block script %}
<script>
    // JS 코드는 유지, 필요시 JS를 여기에 추가
</script>
{% endblock %}
